<!DOCTYPE html>
<html lang="en">

<body>
    <div class="container">
        <label id=locLabel>Enter Location</label>
        <div id="locationInput" class="input-group-lg center-block helloInput">
            <input id="location" type="text" placeholder="Enter Zipcode or City and State" value="" />
        </div>

        <label id=dateLabel>Enter Date (Optional)</label>
        <div id="dateInput" class="input-group-lg center-block helloInput">
            <input id="date" type="text" placeholder="YYYY-MM-DD" value="" />
        </div>
				<div id="submitInput" class="input-group-lg center-block">
					<input type="submit" id="submit" name="submit" value="Submit" />
				</div>
        <p id="response" class="lead text-center"></p>
    </div>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="../static/antixss.js" type="text/javascript"></script>

    <script>
    	//Submit data when enter key is pressed
        $('#submit').click(function() {
						console.log("I DID IT");
            var name = $('#location').val();
            var date = $('#date').val();
            if (name.length > 0) { //catch Enter key
                //POST request to API to create a new visitor entry in the database
                if (date.length > 0){
                    $.ajax({
				     method: "POST",
				    url: "./api",
				    contentType: "application/json",
				    data: JSON.stringify({name: name, date: date})
				    })
                    .done(function(data) {
                        $('#response').html(AntiXSS.sanitizeInput(data));
                        $('#locationInput').hide();
                        $('#dateInput').hide();
                        $('#dateLabel').hide();
                        $('#locLabel').hide();
                    });
                }
                else {
                    $.ajax({
				     method: "POST",
				    url: "./api",
				    contentType: "application/json",
				    data: JSON.stringify({name: name})
				    })
                    .done(function(data) {
                        $('#response').html(AntiXSS.sanitizeInput(data));
                        $('#locationInput').hide();
                        $('#dateInput').hide();
                        $('#dateLabel').hide();
                        $('#locLabel').hide();
                    });
                }
            }
        });

    </script>

<script src='https://darksky.net/map-embed/@temperature,39.000,-95.000,1.js?embed=true&timeControl=false&fieldControl=false&defaultField=temperature&defaultUnits=_f'></script>
</body>

</html>
